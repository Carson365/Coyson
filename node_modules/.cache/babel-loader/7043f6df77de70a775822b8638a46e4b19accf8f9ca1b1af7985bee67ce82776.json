{"ast":null,"code":"var _jsxFileName = \"/Users/coycrowder/MIS 321/321Project/Coyson/src/Components/SearchList.jsx\",\n  _s = $RefreshSig$();\nimport { booksByGenre } from '../Api.js';\nimport Card from './Card.jsx';\nimport React, { useState, useEffect } from 'react';\nimport Fuse from 'fuse.js';\nimport '../Pages/Search.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ITEMS_PER_PAGE = 20;\nconst SearchList = ({\n  input\n}) => {\n  _s();\n  const [filteredBooks, setFilteredBooks] = useState([]);\n  const [showAll, setShowAll] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  useEffect(() => {\n    const books = flattenBooksByGenre();\n    setCurrentPage(1);\n    if (!input || input.trim() === '') {\n      const sortedBooks = [...books].sort((a, b) => a.title.localeCompare(b.title));\n      setFilteredBooks(sortedBooks);\n      setShowAll(true);\n      return;\n    }\n    const options = {\n      keys: ['title', 'categories', 'authors'],\n      threshold: 0.3,\n      includeScore: true\n    };\n    const fuse = new Fuse(books, options);\n    const result = fuse.search(input);\n    const sortedBooks = result.map(({\n      item\n    }) => item).sort((a, b) => {\n      return result.find(r => r.item === a).score - result.find(r => r.item === b).score;\n    });\n    if (sortedBooks.length === 0) {\n      const sortedAll = [...books].sort((a, b) => a.title.localeCompare(b.title));\n      setFilteredBooks(sortedAll);\n      setShowAll(true);\n    } else {\n      setFilteredBooks(sortedBooks);\n      setShowAll(false);\n    }\n  }, [input]);\n  const totalPages = Math.ceil(filteredBooks.length / ITEMS_PER_PAGE);\n  const currentBooks = filteredBooks.slice((currentPage - 1) * ITEMS_PER_PAGE, currentPage * ITEMS_PER_PAGE);\n  const handlePrev = () => {\n    setCurrentPage(prev => Math.max(prev - 1, 1));\n  };\n  const handleNext = () => {\n    setCurrentPage(prev => Math.min(prev + 1, totalPages));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"body\",\n    className: \"search-results-container\",\n    children: [input && !showAll && /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"results-title\",\n      children: [\"Showing Results For \\\"\", input, \"\\\"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), showAll && /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"results-title\",\n      children: \"Showing All Books A-Z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book-grid\",\n      children: currentBooks.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"book-card-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          book: book\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)\n      }, book.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pagination-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handlePrev,\n          disabled: currentPage === 1,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleNext,\n          disabled: currentPage === totalPages,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination-page\",\n        children: [\"Page \", currentPage, \" of \", totalPages]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchList, \"QG5RdKf98y2HIeWD6BRkt6J08Lw=\");\n_c = SearchList;\nconst flattenBooksByGenre = () => {\n  const allBooks = Object.values(booksByGenre).flat();\n  const uniqueBooks = [];\n\n  // Use a Set to filter out duplicate books by their ID\n  const seenIds = new Set();\n  allBooks.forEach(book => {\n    if (!seenIds.has(book.id)) {\n      seenIds.add(book.id);\n      uniqueBooks.push(book);\n    }\n  });\n  return uniqueBooks;\n};\nexport default SearchList;\nvar _c;\n$RefreshReg$(_c, \"SearchList\");","map":{"version":3,"names":["booksByGenre","Card","React","useState","useEffect","Fuse","jsxDEV","_jsxDEV","ITEMS_PER_PAGE","SearchList","input","_s","filteredBooks","setFilteredBooks","showAll","setShowAll","currentPage","setCurrentPage","books","flattenBooksByGenre","trim","sortedBooks","sort","a","b","title","localeCompare","options","keys","threshold","includeScore","fuse","result","search","map","item","find","r","score","length","sortedAll","totalPages","Math","ceil","currentBooks","slice","handlePrev","prev","max","handleNext","min","id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","book","onClick","disabled","_c","allBooks","Object","values","flat","uniqueBooks","seenIds","Set","forEach","has","add","push","$RefreshReg$"],"sources":["/Users/coycrowder/MIS 321/321Project/Coyson/src/Components/SearchList.jsx"],"sourcesContent":["import { booksByGenre } from '../Api.js';\nimport Card from './Card.jsx';\nimport React, { useState, useEffect } from 'react';\nimport Fuse from 'fuse.js';\nimport '../Pages/Search.css'; \n\nconst ITEMS_PER_PAGE = 20;\n\nconst SearchList = ({ input }) => {\n  const [filteredBooks, setFilteredBooks] = useState([]);\n  const [showAll, setShowAll] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  useEffect(() => {\n    const books = flattenBooksByGenre();\n\n    setCurrentPage(1);\n\n    if (!input || input.trim() === '') {\n      const sortedBooks = [...books].sort((a, b) =>\n        a.title.localeCompare(b.title)\n      );\n      setFilteredBooks(sortedBooks);\n      setShowAll(true);\n      return;\n    }\n\n    const options = {\n      keys: ['title', 'categories', 'authors'],\n      threshold: 0.3,\n      includeScore: true,\n    };\n\n    const fuse = new Fuse(books, options);\n    const result = fuse.search(input);\n\n    const sortedBooks = result\n      .map(({ item }) => item)\n      .sort((a, b) => {\n        return result.find(r => r.item === a).score - result.find(r => r.item === b).score;\n      });\n\n    if (sortedBooks.length === 0) {\n      const sortedAll = [...books].sort((a, b) =>\n        a.title.localeCompare(b.title)\n      );\n      setFilteredBooks(sortedAll);\n      setShowAll(true);\n    } else {\n      setFilteredBooks(sortedBooks);\n      setShowAll(false);\n    }\n  }, [input]);\n\n  const totalPages = Math.ceil(filteredBooks.length / ITEMS_PER_PAGE);\n  const currentBooks = filteredBooks.slice(\n    (currentPage - 1) * ITEMS_PER_PAGE,\n    currentPage * ITEMS_PER_PAGE\n  );\n\n  const handlePrev = () => {\n    setCurrentPage((prev) => Math.max(prev - 1, 1));\n  };\n\n  const handleNext = () => {\n    setCurrentPage((prev) => Math.min(prev + 1, totalPages));\n  };\n\n  return (\n    <div id=\"body\" className=\"search-results-container\">\n      {input && !showAll && (\n        <h2 className=\"results-title\">Showing Results For \"{input}\"</h2>\n      )}\n      {showAll && (\n        <h2 className=\"results-title\">Showing All Books A-Z</h2>\n      )}\n\n      <div className=\"book-grid\">\n        {currentBooks.map((book) => (\n          <div key={book.id} className=\"book-card-wrapper\">\n            <Card book={book} />\n          </div>\n        ))}\n      </div>\n\n      {totalPages > 1 && (\n        <div className=\"pagination-controls\">\n          <div className=\"pagination-buttons\">\n            <button onClick={handlePrev} disabled={currentPage === 1}>\n              Previous\n            </button>\n            <button onClick={handleNext} disabled={currentPage === totalPages}>\n              Next\n            </button>\n          </div>\n          <div className=\"pagination-page\">\n            Page {currentPage} of {totalPages}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst flattenBooksByGenre = () => {\n  const allBooks = Object.values(booksByGenre).flat();\n  const uniqueBooks = [];\n\n  // Use a Set to filter out duplicate books by their ID\n  const seenIds = new Set();\n  allBooks.forEach((book) => {\n    if (!seenIds.has(book.id)) {\n      seenIds.add(book.id);\n      uniqueBooks.push(book);\n    }\n  });\n\n  return uniqueBooks;\n};\n\nexport default SearchList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}