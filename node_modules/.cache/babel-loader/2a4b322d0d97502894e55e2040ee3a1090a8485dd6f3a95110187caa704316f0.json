{"ast":null,"code":"// Global variable to store books by category\nexport let booksByCategory = {};\n\n// Function to clean book data\nconst cleanBookData = book => {\n  return {\n    title: book.title || \"Unavailable\",\n    subtitle: book.subtitle || \"Unavailable\",\n    authors: book.authors && book.authors.length > 0 ? book.authors.join(\", \") : \"Unavailable\",\n    publisher: book.publisher || \"Unavailable\",\n    description: book.description || \"Unavailable\",\n    pageCount: book.pageCount || \"Unavailable\",\n    categories: book.categories && book.categories.length > 0 ? book.categories.join(\", \") : \"Unavailable\",\n    rating: book.averageRating || \"Unavailable\",\n    maturityRating: book.maturityRating || \"Unavailable\",\n    image: book.imageLinks ? book.imageLinks.thumbnail : \"Unavailable\"\n  };\n};\n\n// Fetch fiction books in batches\nexport const fetchFictionBooks = async batchSize => {\n  let booksFetched = 0;\n  let startIndex = 0;\n\n  // Ensure that the category \"Fiction\" exists in the booksByCategory object\n  if (!booksByCategory.Fiction) {\n    booksByCategory.Fiction = [];\n  }\n\n  // Loop to fetch books in batches\n  while (booksFetched < batchSize) {\n    const remainingBooks = batchSize - booksFetched;\n    const currentBatchSize = Math.min(remainingBooks, 40); // Maximum 40 books per batch\n\n    let response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=fiction&maxResults=${currentBatchSize}&startIndex=${startIndex}`);\n    let data = await response.json();\n\n    // If no books are returned, break the loop\n    if (!data.items || data.items.length === 0) {\n      break;\n    }\n\n    // Process each book in the current batch\n    data.items.forEach(item => {\n      const bookInfo = item.volumeInfo;\n      const cleanedBook = cleanBookData(bookInfo);\n      booksByCategory.Fiction.push(cleanedBook);\n      booksFetched++;\n    });\n\n    // Move the startIndex forward for the next batch\n    startIndex += currentBatchSize;\n  }\n\n  // Log the result for debugging\n  console.log(booksByCategory);\n  return booksByCategory;\n};","map":{"version":3,"names":["booksByCategory","cleanBookData","book","title","subtitle","authors","length","join","publisher","description","pageCount","categories","rating","averageRating","maturityRating","image","imageLinks","thumbnail","fetchFictionBooks","batchSize","booksFetched","startIndex","Fiction","remainingBooks","currentBatchSize","Math","min","response","fetch","data","json","items","forEach","item","bookInfo","volumeInfo","cleanedBook","push","console","log"],"sources":["/Users/coycrowder/MIS 321/react/my-app/src/api.js"],"sourcesContent":["// Global variable to store books by category\nexport let booksByCategory = {};\n\n// Function to clean book data\nconst cleanBookData = (book) => {\n  return {\n    title: book.title || \"Unavailable\",\n    subtitle: book.subtitle || \"Unavailable\",\n    authors: (book.authors && book.authors.length > 0) ? book.authors.join(\", \") : \"Unavailable\",\n    publisher: book.publisher || \"Unavailable\",\n    description: book.description || \"Unavailable\",\n    pageCount: book.pageCount || \"Unavailable\",\n    categories: book.categories && book.categories.length > 0 ? book.categories.join(\", \") : \"Unavailable\",\n    rating: book.averageRating || \"Unavailable\",\n    maturityRating: book.maturityRating || \"Unavailable\",\n    image: book.imageLinks ? book.imageLinks.thumbnail : \"Unavailable\",\n  };\n};\n\n// Fetch fiction books in batches\nexport const fetchFictionBooks = async (batchSize) => {\n  let booksFetched = 0;\n  let startIndex = 0;\n\n  // Ensure that the category \"Fiction\" exists in the booksByCategory object\n  if (!booksByCategory.Fiction) {\n    booksByCategory.Fiction = [];\n  }\n\n  // Loop to fetch books in batches\n  while (booksFetched < batchSize) {\n    const remainingBooks = batchSize - booksFetched;\n    const currentBatchSize = Math.min(remainingBooks, 40); // Maximum 40 books per batch\n\n    let response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=fiction&maxResults=${currentBatchSize}&startIndex=${startIndex}`);\n    let data = await response.json();\n\n    // If no books are returned, break the loop\n    if (!data.items || data.items.length === 0) {\n      break;\n    }\n\n    // Process each book in the current batch\n    data.items.forEach(item => {\n      const bookInfo = item.volumeInfo;\n      const cleanedBook = cleanBookData(bookInfo);\n      booksByCategory.Fiction.push(cleanedBook);\n      booksFetched++;\n    });\n\n    // Move the startIndex forward for the next batch\n    startIndex += currentBatchSize;\n  }\n\n  // Log the result for debugging\n  console.log(booksByCategory);\n  return booksByCategory;\n};"],"mappings":"AAAA;AACA,OAAO,IAAIA,eAAe,GAAG,CAAC,CAAC;;AAE/B;AACA,MAAMC,aAAa,GAAIC,IAAI,IAAK;EAC9B,OAAO;IACLC,KAAK,EAAED,IAAI,CAACC,KAAK,IAAI,aAAa;IAClCC,QAAQ,EAAEF,IAAI,CAACE,QAAQ,IAAI,aAAa;IACxCC,OAAO,EAAGH,IAAI,CAACG,OAAO,IAAIH,IAAI,CAACG,OAAO,CAACC,MAAM,GAAG,CAAC,GAAIJ,IAAI,CAACG,OAAO,CAACE,IAAI,CAAC,IAAI,CAAC,GAAG,aAAa;IAC5FC,SAAS,EAAEN,IAAI,CAACM,SAAS,IAAI,aAAa;IAC1CC,WAAW,EAAEP,IAAI,CAACO,WAAW,IAAI,aAAa;IAC9CC,SAAS,EAAER,IAAI,CAACQ,SAAS,IAAI,aAAa;IAC1CC,UAAU,EAAET,IAAI,CAACS,UAAU,IAAIT,IAAI,CAACS,UAAU,CAACL,MAAM,GAAG,CAAC,GAAGJ,IAAI,CAACS,UAAU,CAACJ,IAAI,CAAC,IAAI,CAAC,GAAG,aAAa;IACtGK,MAAM,EAAEV,IAAI,CAACW,aAAa,IAAI,aAAa;IAC3CC,cAAc,EAAEZ,IAAI,CAACY,cAAc,IAAI,aAAa;IACpDC,KAAK,EAAEb,IAAI,CAACc,UAAU,GAAGd,IAAI,CAACc,UAAU,CAACC,SAAS,GAAG;EACvD,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMC,iBAAiB,GAAG,MAAOC,SAAS,IAAK;EACpD,IAAIC,YAAY,GAAG,CAAC;EACpB,IAAIC,UAAU,GAAG,CAAC;;EAElB;EACA,IAAI,CAACrB,eAAe,CAACsB,OAAO,EAAE;IAC5BtB,eAAe,CAACsB,OAAO,GAAG,EAAE;EAC9B;;EAEA;EACA,OAAOF,YAAY,GAAGD,SAAS,EAAE;IAC/B,MAAMI,cAAc,GAAGJ,SAAS,GAAGC,YAAY;IAC/C,MAAMI,gBAAgB,GAAGC,IAAI,CAACC,GAAG,CAACH,cAAc,EAAE,EAAE,CAAC,CAAC,CAAC;;IAEvD,IAAII,QAAQ,GAAG,MAAMC,KAAK,CAAC,oEAAoEJ,gBAAgB,eAAeH,UAAU,EAAE,CAAC;IAC3I,IAAIQ,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;;IAEhC;IACA,IAAI,CAACD,IAAI,CAACE,KAAK,IAAIF,IAAI,CAACE,KAAK,CAACzB,MAAM,KAAK,CAAC,EAAE;MAC1C;IACF;;IAEA;IACAuB,IAAI,CAACE,KAAK,CAACC,OAAO,CAACC,IAAI,IAAI;MACzB,MAAMC,QAAQ,GAAGD,IAAI,CAACE,UAAU;MAChC,MAAMC,WAAW,GAAGnC,aAAa,CAACiC,QAAQ,CAAC;MAC3ClC,eAAe,CAACsB,OAAO,CAACe,IAAI,CAACD,WAAW,CAAC;MACzChB,YAAY,EAAE;IAChB,CAAC,CAAC;;IAEF;IACAC,UAAU,IAAIG,gBAAgB;EAChC;;EAEA;EACAc,OAAO,CAACC,GAAG,CAACvC,eAAe,CAAC;EAC5B,OAAOA,eAAe;AACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}