{"ast":null,"code":"var _jsxFileName = \"/Users/coycrowder/MIS 321/321Project/Coyson/src/UserContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { FetchCart } from './Api'; // make sure this fetches cart by user.id\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext();\nexport const UserProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUserState] = useState(null);\n  const [cart, setCart] = useState([]);\n\n  // Load user from localStorage on mount\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      try {\n        const parsed = JSON.parse(storedUser);\n        setUserState(parsed);\n      } catch (e) {\n        console.error('Failed to parse user:', e);\n      }\n    }\n  }, []);\n\n  // Fetch cart whenever user changes\n  useEffect(() => {\n    const loadCart = async () => {\n      if (user && user.id) {\n        try {\n          const fetchedCart = await FetchCart(user.id);\n          setCart(fetchedCart);\n        } catch (e) {\n          console.error('Failed to fetch cart:', e);\n        }\n      }\n    };\n    loadCart();\n  }, [user]);\n  const setUser = userData => {\n    if (userData) {\n      localStorage.setItem('user', JSON.stringify(userData));\n    } else {\n      localStorage.removeItem('user');\n      setCart([]);\n    }\n    setUserState(userData);\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      setUser,\n      cart,\n      setCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProvider, \"ATuVggT9oKwC4B+R7HTed9BCbMY=\");\n_c = UserProvider;\nexport const useUser = () => {\n  _s2();\n  return useContext(UserContext);\n};\n_s2(useUser, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","FetchCart","jsxDEV","_jsxDEV","UserContext","UserProvider","children","_s","user","setUserState","cart","setCart","storedUser","localStorage","getItem","parsed","JSON","parse","e","console","error","loadCart","id","fetchedCart","setUser","userData","setItem","stringify","removeItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useUser","_s2","$RefreshReg$"],"sources":["/Users/coycrowder/MIS 321/321Project/Coyson/src/UserContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { FetchCart } from './Api'; // make sure this fetches cart by user.id\n\nconst UserContext = createContext();\n\nexport const UserProvider = ({ children }) => {\n  const [user, setUserState] = useState(null);\n  const [cart, setCart] = useState([]);\n\n  // Load user from localStorage on mount\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      try {\n        const parsed = JSON.parse(storedUser);\n        setUserState(parsed);\n      } catch (e) {\n        console.error('Failed to parse user:', e);\n      }\n    }\n  }, []);\n\n  // Fetch cart whenever user changes\n  useEffect(() => {\n    const loadCart = async () => {\n      if (user && user.id) {\n        try {\n          const fetchedCart = await FetchCart(user.id);\n          setCart(fetchedCart);\n        } catch (e) {\n          console.error('Failed to fetch cart:', e);\n        }\n      }\n    };\n    loadCart();\n  }, [user]);\n\n  const setUser = (userData) => {\n    if (userData) {\n      localStorage.setItem('user', JSON.stringify(userData));\n    } else {\n      localStorage.removeItem('user');\n      setCart([]);\n    }\n    setUserState(userData);\n  };\n\n  return (\n    <UserContext.Provider value={{ user, setUser, cart, setCart }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport const useUser = () => useContext(UserContext);\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,SAAS,QAAQ,OAAO,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEnC,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMQ,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC5C,MAAM,CAACC,IAAI,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC3C,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;;EAEpC;EACAC,SAAS,CAAC,MAAM;IACd,MAAMY,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC/C,IAAIF,UAAU,EAAE;MACd,IAAI;QACF,MAAMG,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC;QACrCH,YAAY,CAACM,MAAM,CAAC;MACtB,CAAC,CAAC,OAAOG,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,CAAC,CAAC;MAC3C;IACF;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAlB,SAAS,CAAC,MAAM;IACd,MAAMqB,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAIb,IAAI,IAAIA,IAAI,CAACc,EAAE,EAAE;QACnB,IAAI;UACF,MAAMC,WAAW,GAAG,MAAMtB,SAAS,CAACO,IAAI,CAACc,EAAE,CAAC;UAC5CX,OAAO,CAACY,WAAW,CAAC;QACtB,CAAC,CAAC,OAAOL,CAAC,EAAE;UACVC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,CAAC,CAAC;QAC3C;MACF;IACF,CAAC;IACDG,QAAQ,CAAC,CAAC;EACZ,CAAC,EAAE,CAACb,IAAI,CAAC,CAAC;EAEV,MAAMgB,OAAO,GAAIC,QAAQ,IAAK;IAC5B,IAAIA,QAAQ,EAAE;MACZZ,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEV,IAAI,CAACW,SAAS,CAACF,QAAQ,CAAC,CAAC;IACxD,CAAC,MAAM;MACLZ,YAAY,CAACe,UAAU,CAAC,MAAM,CAAC;MAC/BjB,OAAO,CAAC,EAAE,CAAC;IACb;IACAF,YAAY,CAACgB,QAAQ,CAAC;EACxB,CAAC;EAED,oBACEtB,OAAA,CAACC,WAAW,CAACyB,QAAQ;IAACC,KAAK,EAAE;MAAEtB,IAAI;MAAEgB,OAAO;MAAEd,IAAI;MAAEC;IAAQ,CAAE;IAAAL,QAAA,EAC3DA;EAAQ;IAAAyB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAC3B,EAAA,CA/CWF,YAAY;AAAA8B,EAAA,GAAZ9B,YAAY;AAiDzB,OAAO,MAAM+B,OAAO,GAAGA,CAAA;EAAAC,GAAA;EAAA,OAAMvC,UAAU,CAACM,WAAW,CAAC;AAAA;AAACiC,GAAA,CAAxCD,OAAO;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}